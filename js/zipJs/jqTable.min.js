$(function(){var M={fixedLeft:false,fixedRight:false,fixedMinWidth:100,fixedMaxWidth:500,totalString:"--",totalTitle:"总计",handleSortData:{},noWidthColAdaptClient:false};var c=v();var r='<div class="c-table__sort {{class}}"><i class="c-table__down" aria-hidden="true"></i><i class="c-table__up" aria-hidden="true"></i></div >';var o='<div class="c-table__fixed-header-wrapper">{{theadHtml}}</div><div class="c-table__fixed-body-wrapper"> {{tbodyHtml}}</div>';var d='<div class="c-table__fixed"> {{fixedWrapper}}</div>';var u='<div class="c-table__fixed-right"> {{fixedWrapper}}</div>';var y='<div class="c-table--main" style="width: 100%;"><div class="c-table__header-wrapper"> {{theadHtml}}</div><div class="c-table__body-wrapper"> {{tbodyHtml}}</div> {{fixedLeft}}{{fixedRight}}</div>';var C='<td class="gutter"></td>';var A='<td class="gutter" style="width:'+c+'px;"></td>';var x='<div class="c-table__fixed-right-patch" style="width: '+c+'px; height: {{headerHeight}}px;"></div>';$("body").on("click.jqTable",".c-table__down",function(){m($(this),true)});$("body").on("click.jqTable",".c-table__up",function(){m($(this),false)});function K(V,W){this.$container=W;this.config=$.extend({},M,V);this.init(this.$container)}$.extend(K.prototype,{init:function(W){this.isSafria=/version\/([\d.]+).*safari/i.test(navigator.userAgent);this.render(W);this.event(W);var X=this;var V=this.$table.find(".c-table__sort");if(V){$.each(V,function(Y,Z){if($(Z).hasClass("activeUp")){$(Z).find(".c-table__up").trigger("click.jqTable");X.updateEvent();return false}if($(Z).hasClass("activeDown")){$(Z).find(".c-table__down").trigger("click.jqTable");X.updateEvent();return false}})}$(window).trigger("resize")},render:function(Y){var Z=this;var W=B(Z,Y).data("table",Z);if(!Z.$table){Z.tableHeight=Y.data("height");var V=Y.parents(".c-table").last();W.addClass(V.attr("class"));V.removeAttr("class");Y.after(W).remove();Z.$table=W;Z.$table.data("height",Z.tableHeight)}else{Z.$table.html(W.html());W=Z.$table}W.find("table").addClass("c-table--noWp100");Z.colJson=e(Z);W.find("table").removeClass("c-table--noWp100");Z.totalJson=U(Z);Z.fixedWidth=Z.colJson.isAllWidth;Z.headerHeight=n(Z.$table);if(!Z.totalJson.noTotal){Z.totalArr=l(Z)}if(Z.fixedWidth){var X=Z.colJson.width.reduce(b,0);Z.$table.width(X+1)}G(Z)},event:function(V){var W=this;$(window).resize(function(){G(W.$table.data("table"))});this.updateEvent()},updateEvent:function(){var V=this;V.$table.find(".c-table__body-wrapper").scroll(function(){var aa=$(this);var X=aa.parents(".c-table--main");var ac=aa.scrollLeft();var Y=aa.scrollTop();var ab=X.find(".c-table__header-wrapper table");var Z=X.find(".c-table__footer-wrapper table");var W=X.find(".c-table__fixed-body-wrapper table");ab.css({"margin-left":-ac+"px"});Z.css({"margin-left":-ac+"px"});W.css({"margin-top":-Y+"px"})});if(V.config.fixedLeft||V.config.fixedRight){V.$table.find("tbody tr").hover(function(){var Z=$(this);var Y=Z.parents(".c-table--main");var X=Z.parents("tbody").find("tr").index(Z);var W=Y.find("tbody");$.each(W,function(ab,aa){$(aa).find("tr").eq(X).addClass("hover-row")})},function(){var W=$(this).parents(".c-table--main").find("tbody");W.find("tr").removeClass("hover-row")})}},updateHtml:function(V){this.init($(V))}});function m(af,X){var ac=X?"activeDown":"activeUp";var Z=af.parents(".c-table--main");var ab=Z.data("table");var ah=Z.find(".c-table__fixed-body-wrapper tbody");var W=Z.find(".c-table__body-wrapper table tbody");var Y=W.find("tr");var ag=af.parents("thead").find("th");var ae=[];var aa=ag.index(af.parents("th"));Z.find(".c-table__sort").removeClass("activeUp activeDown");Z.find(".c-table__fixed-header-wrapper th").eq(aa).find(".c-table__sort").addClass(ac);Z.find(".c-table__header-wrapper th").eq(aa).find(".c-table__sort").addClass(ac);if(Y.length<=1){return}$.each(Y,function(ak,aj){var ai={};ai.index=ak;ai.value=$(aj).find("td").eq(aa).text().trim();ae.push(ai)});var ad=ab.config.handleSortData;var V=ab.sortConfig;if(V[aa]){if(V[aa]&&ad[V[aa]]&&typeof(ad[V[aa]])==="function"){ae=ad[V[aa]](ae)}else{ae=g(ae,V[aa])}}ae=E(ae,"value",X);w(ab,W,ae);$.each(ah,function(ai,aj){w(ab,$(aj),ae)})}function g(Z,aa){var V=[];var Y;var X=new RegExp(aa,"g");for(var W=0;W<Z.length;W++){Y=Z[W];Y.value=(Y.value+"").replace(X,"");V.push(Y)}return V}function w(ac,W,ab){var aa=W.find("tr");var X=W.clone();X.html("");for(var Z=0,V=ab.length;Z<V;Z++){var Y=ab[Z].index;X.append(aa.eq(Y).clone())}W.replaceWith(X);ac.updateEvent()}function E(V,X,Y){var W;if(V.length<2){return}if(isNaN(V[0][X])){W=F}else{W=t}V.sort(function(aa,Z){var ac=aa[X],ab=Z[X];if(Y){ac=Z[X];ab=aa[X]}return W(ac,ab)});return V}function t(W,V){return W-V}function F(W,V){var Y=W.toLowerCase(),X=V.toLowerCase();if(Y<X){return -1}if(Y>X){return 1}return 0}function i(Y,aa){var ae=f(Y,aa);if(ae.noSort){return}Y.sortConfig=ae.sortConfig;var ac=ae.sort;var ad=aa.find("thead th");for(var W=0,Z=ac.length;W<Z;W++){var V=ac[W];if(V){var ab=V==="up"?"activeUp":V==="down"?"activeDown":"";var X=$(r.replace("{{class}}",ab));ad.eq(W).find(".cell").append(X)}}}function n(V){return V.find(".c-table__header-wrapper").height()}function B(ab,ad){var X;var ac=ad.clone().addClass("c-table__header");var Y=ad.clone().addClass("c-table__body");ac.find("tbody").remove();Y.find("thead").remove();i(ab,ac);var V=ac[0].outerHTML;var ag=Y[0].outerHTML;var aa=o.replace("{{theadHtml}}",V).replace("{{tbodyHtml}}",ag);var W=ab.config.fixedLeft?d.replace(/{{fixedWrapper}}/g,aa):"";var ae=ab.config.fixedRight?u.replace(/{{fixedWrapper}}/g,aa):"";var af=y.replace("{{theadHtml}}",V).replace("{{tbodyHtml}}",ag).replace("{{fixedLeft}}",W).replace("{{fixedRight}}",ae);var Z=$(af);return Z}function G(ac){var aa=ac.$table;var Z=aa.find(".c-table__header-wrapper");var Y=aa.find(".c-table__body-wrapper");var ad=Z.find("table");var X=Y.find("table");var V=aa.find("colgroup");var W;var ae=ac.colJson;T(ac,aa);W=I(Y,X,aa,ae);if(!ac.fixedWidth){P(ac,aa,ae,W)}var ab=aa.width();O(aa,W);if(ac.fixedWidth){J(ac,aa,W)}W=I(Y,X,aa,ae);if(ac.config.fixedRight||ac.config.fixedLeft){k(ac,aa,W);H(ac,aa,W)}else{aa.addClass("c-table--enable-row-hover el-table--enable-row-transition")}if(W.colScroll&&!aa.find(".c-table__fixed-right-patch").length){Y.after(x.replace("{{headerHeight}}",ac.headerHeight))}else{if(!W.colScroll){aa.find(".c-table__fixed-right-patch").remove()}}if(!ac.totalJson.noTotal){N(ac,aa)}}function N(ab,W){var aa=W.find(".c-table__body-wrapper");var V=aa.clone().removeClass("c-table__body-wrapper").addClass("c-table__footer-wrapper");V.find(".c-table__body").removeClass(".c-table__body").addClass("c-table__footer");var Z=V.find("tbody tr:not(:first)").remove();var X=W.find(".c-table__footer-wrapper");if(X.length){X.replaceWith(V)}else{aa.after(V)}var Y=V.find("tbody tr").eq(0).find("td");$.each(Y,function(ac,ad){Y.find(".cell").eq(ac).html(ab.totalArr[ac])})}function l(Z){var aa=Z.totalJson;var Y=Z.$table.find(".c-table__body-wrapper").find("tbody tr:not(:first)");var ad=[Z.config.totalTitle];var V=[];var W=Z.config.totalString;$.each(Y,function(ae,af){var ag=$(af).find("td");$.each(ag,function(ah,ai){if(ae===0){V.push([])}V[ah].push($(ai).text().trim())})});var ac;for(var X=1;X<aa.total.length;X++){var ab=aa.total[X];if(ab){ac=V[X].reduce(q,0)}else{ac=W}ad.push(ac)}return ad}function H(ae,ac,V){var Z=ac.find(".g-selectAll--input");if(!Z.length){return}var aa=ac.find(".c-table__fixed");var Y=ac.find(".c-table__fixed-right");var ab=ac.find(".c-table__body-wrapper tr");var af,ad=ae.colJson.width.length-1;var W=Q(ab,0);var X=Q(ab,ad);if(ae.config.fixedLeft&&W){z(Y,ab,0)}if(ae.config.fixedRight&&X){z(aa,ab,ad)}}function z(W,X,V){var Y=W.find(".c-table__fixed-body-wrapper tr");if(W.length){$.each(Y,function(aa,Z){j(Z,V)})}$.each(X,function(aa,Z){j(Z,V)})}function j(W,V){$(W).find("td").eq(V).find(".g-selectAll--input").remove()}function Q(W,V){return W.eq(0).find("td").eq(V).find(".g-selectAll--input").length}function k(ag,Y,af){var ai=ag.colJson.width.length;var X=Y.find(".c-table__header-wrapper table th");var ad=Y.find(".c-table__body-wrapper table tr").eq(0);var ah=ad.find("td:not(.gutter)");var ao=ag.headerHeight;var ap=Y.height();var ak=Y.width();var ac=ap-ao;var an=Y.find(".c-table__fixed");var am=Y.find(".c-table__fixed-right");var aa=ag.config;var ae=aa.fixedLeft;var ab=aa.fixedRight;if(af.rowScroll){ac-=c}if(ag.config.fixedRight||ae){Y.find(".c-table__fixed-body-wrapper").css({"max-height":ac+"px",top:ag.headerHeight+"px"})}if(ae&&ae<=1){an.find(".c-table__fixed-body-wrapper tr td:not(:first-child):not(.gutter)").addClass("is-hidden")}else{if(ae>1){$.each(an.find(".c-table__fixed-body-wrapper tr"),function(ar,aq){$.each($(aq).find("td:not(.gutter)"),function(at,au){if(at>=ae){$(au).addClass("is-hidden")}})})}}if(ab&&ab<=1){am.find(".c-table__fixed-body-wrapper tr td:not(:nth-child("+ai+")):not(.gutter)").addClass("is-hidden")}else{if(ab>1){$.each(am.find(".c-table__fixed-body-wrapper tr"),function(ar,aq){$.each($(aq).find("td:not(.gutter)"),function(at,au){if(at<=ai-ab-1){$(au).addClass("is-hidden")}})})}}var al=af.rowScroll?ap-c:ap;if(!ag.totalJson.noTotal){al-=ad.height()}if(ae){var aj=0;if(ae<=1){aj=ah.eq(0).width()}else{if(ae>1){for(var Z=0;Z<ae;Z++){aj+=ah.eq(Z).width()}}}an.width(aj).height(al);if(ag.colJson.isAllWidth===true){an.find("table").width(ak)}}if(ag.config.fixedRight){var W=af.colScroll?c:0;var V=0;if(ab<=1){V=ah.eq(ah.length-1).width()}else{if(ab>1){for(var Z=0;Z<ab;Z++){V+=ah.eq(ah.length-1-Z).width()}}}am.width(V).height(al).css({right:W});if(ag.colJson.isAllWidth===true){am.find("table").width(ak)}}}function J(ab,W,Z){var X=W.find(".c-table__header-wrapper table");var V=W.find(".c-table__body-wrapper table");var Y=ab.colJson.width.reduce(b,0);var aa=Z.colScroll?Y+c:Y;W.width(aa+1);X.width(Y);V.width(Y)}function O(W,Z){var X=W.find(".c-table__header-wrapper table");var V=W.find(".c-table__body-wrapper table");var Y=X.find(".gutter").length;if(Y){X.find(".gutter").remove();V.find(".gutter").remove()}}function T(ab,W){var X=ab.$table.data("height");if(X){var aa=W.find(".c-table__body-wrapper");W.css({"max-height":X+"px"});aa.css({"max-height":"none"});var Z=ab.headerHeight;var V=W.height();var Y=V-Z;if(!ab.totalJson.noTotal){Y-=aa.find("tbody tr").eq(0).height()}aa.css({"max-height":Y+"px"})}}function P(ag,ae,ai,X){var V=ae.find("colgroup");var ah=ae.width();var Z=ai.noWidthIndex.length;var Y=ai.tdWidth.reduce(b,0);if(X.colScroll){Y+=c}var W=ag.config.fixedMinWidth;var ab=ag.config.noWidthColAdaptClient;var ad=[];for(var ac=0;ac<Z;ac++){var aj=ai.noWidthIndex[ac];ad.push(ai.tdWidth[aj])}var aa=ad.reduce(b,0);var af=ah-Y+aa-2;if(ad.length*W>=af){S(ag,V,ai,ad,W)}else{ad=L(ad,af,W,ad.length,ab);S(ag,V,ai,ad,false)}Y=ai.width.reduce(b,0)+2;ae.find(".c-table__header-wrapper table").width(Y);ae.find(".c-table__body-wrapper table").width(Y);ae.find(".c-table__fixed-header-wrapper table").width(Y-2);ae.find(".c-table__fixed-body-wrapper table").width(Y-2)}function S(ab,V,ad,aa,W){var X=ad.noWidthIndex.length;var ac=[];for(var Z=0;Z<X;Z++){var ae=ad.noWidthIndex[Z];if(/^\d+\.\d{4,}$/.test(aa[Z]+"")){aa[Z]=Number(aa[Z]).toFixed(3)}var Y=W&&aa[Z]<W?W:aa[Z];ad.width[ae]=Number(Y);if(Y>=ab.config.fixedMaxWidth){ac.push(ae)}$.each(V,function(af,ag){$(ag).find("col").eq(ae).attr("width",Y)})}a(ab,V,ad,ac)}function a(Z,W,Y,V){if(Z.isSafria){var X=Y.noWidthIndex;if(V.length>0){D(W,Y,V,true);X=X.filter(function(aa){return V.indexOf(aa)===-1})}if(X.length){D(W,Y,X,false)}}}function D(W,Z,V,Y){for(var X=0;X<V.length;X++){var aa=V[X];$.each(W,function(ae,ac){var ad=$(ac).parents("table").find("tbody tr");var ab=Y?Z.width[aa]-36:"auto";$.each(ad,function(ag,af){$(af).find("td").eq(aa).find(".cell").width(ab)})})}}function L(ad,X,aa,Y,ag){var ae=ad.reduce(q,0);var W=(X-ae)/Y;if(!ag&&W<0){return ad}else{var af=0;var ah=0;var V=0;if(W>0){for(var ac=0;ac<ad.length;ac++){ad[ac]=ad[ac]+W;ad[ac]<aa?ad[ac]=aa:V++}}else{for(var ab=0;ab<ad.length;ab++){if(ad[ab]<aa){ad[ab]=aa}else{if(ad[ab]>aa){var Z=ad[ab]+W;if(Z>aa){V++}ad[ab]=Z<aa?aa:Z}}}}ae=ad.reduce(q,0);if(Math.floor(ae)!==Math.floor(X)){L(ad,X,aa,V,ag)}return ad}}function h(X,W){var V=W<X.config.fixedMinWidth?X.config.fixedMinWidth:W;return V}function b(W,V){return W+V}function q(W,V){return W-(-V)}function v(){var X=document.createElement("p");X.style.width="100%";X.style.height="200px";var Y=document.createElement("div");Y.style.position="absolute";Y.style.top="0px";Y.style.left="0px";Y.style.visibility="hidden";Y.style.width="200px";Y.style.height="150px";Y.style.overflow="hidden";Y.appendChild(X);document.body.appendChild(Y);var W=X.offsetWidth;Y.style.overflow="scroll";var V=X.offsetWidth;if(W==V){V=Y.clientWidth}document.body.removeChild(Y);return(W-V)}function f(Z,W){var X=W.find("colgroup>col");var V=R("sort",X);var Y=R("sortconfig",X);return{sort:V.demo,noSort:V.nodemo,sortConfig:Y.demo}}function U(aa){var X=aa.$table.find(".c-table__header-wrapper table");var Y=X.find("colgroup>col");var V=R("total",Y);var Z=V.demo;var W=V.nodemo;return{total:Z,noTotal:W}}function R(V,Y){var Z=[];var X=0;Y=Y.not("[name=gutter]");$.each(Y,function(ac,ab){var aa=$(ab).data(V);Z.push(aa);if(aa){X++}});var W=X?false:true;return{demo:Z,nodemo:W}}function s(Y,W,V){var Z=Y.eq(V).width();var X=W.eq(V).width();return Z>X?Z:X}function e(Z){Z.$table.addClass("c-table--noWrap-init");var ac=Z.$table.find(".c-table__header-wrapper table");var Y=Z.$table.find(".c-table__body-wrapper table");var ag=ac.find("colgroup>col");var af=ac.width();var X=Y.width();var W=[];var aa=[];var ai=af>X?af:X;var ab=[];var ae=[];var ah=true;var V=Y.find("tr").eq(0).find("td");var ad=ac.find("tr").eq(0).find("th");ag=ag.not("[name=gutter]");$.each(ag,function(am,ak){var aj=$(ak).attr("width")?Number($(ak).attr("width")):0;aj=p(Z,aj);W.push(aj);if(aj){ae.push(aj);aa.push(aj)}else{var al=p(Z,s(V,ad,am)+1);ah=false;ab.push(am);aa.push(al)}});Z.$table.addClass("c-table__cell--block").removeClass("c-table--noWrap-init");return{width:W,noWidthIndex:ab,hasWidthArr:ae,isAllWidth:ah,realTotalWidth:ai,tdWidth:aa}}function p(X,W){var V=W>X.config.fixedMaxWidth?X.config.fixedMaxWidth:W;return V}function I(ab,W,X,Z){var aa=ab.height()<W.height();var V=Z.width.reduce(b,0)+1;if(aa){V+=c}var Y=V>X.width();return{rowScroll:Y,colScroll:aa}}$.fn.jqTable=function(V){return this.each(function(){new K(V,$(this))})}}());